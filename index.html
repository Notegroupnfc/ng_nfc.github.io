<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>NFC Check</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      text-align: center;
      padding: 40px 20px;
    }
    .box {
      background: #ffffff;
      max-width: 420px;
      margin: auto;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h2 {
      margin-bottom: 10px;
    }
    #status {
      margin-top: 15px;
      font-size: 16px;
      font-weight: bold;
    }
    .ok { color: green; }
    .err { color: red; }
  </style>
</head>

<body>
  <div class="box">
    <h2>üì° NFC Scan</h2>
    <p id="info">ƒêang x·ª≠ l√Ω...</p>
    <p id="status"></p>
  </div>

  <script>
    // ===== L·∫§Y PARAM T·ª™ URL NFC =====
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    const source = params.get("source") || "nfc";

    const infoEl = document.getElementById("info");
    const statusEl = document.getElementById("status");

    if (!id) {
      infoEl.innerText = "‚ùå Kh√¥ng t√¨m th·∫•y ID t·ª´ NFC";
      statusEl.className = "err";
      statusEl.innerText = "Link NFC kh√¥ng h·ª£p l·ªá";
    } else {
      infoEl.innerText = `ID: ${id}`;

      // ===== URL GOOGLE APPS SCRIPT (THAY LINK C·ª¶A B·∫†N) =====
      const GAS_URL =
        "https://script.google.com/macros/s/AKfycbxCUnyO0l38bP3Je3YVjYVShRn0gJo4lkKghRfirtJEGRzUjKL5wO_SGqDcQPihJh-O/exec";

      fetch(
        `${GAS_URL}?id=${encodeURIComponent(id)}&source=${encodeURIComponent(source)}`,
        { method: "GET" }
      )
      .then(res => res.text())
      .then(text => {
        statusEl.className = "ok";
        statusEl.innerText = "‚úÖ " + text;
      })
      .catch(err => {
        statusEl.className = "err";
        statusEl.innerText = "‚ùå L·ªói k·∫øt n·ªëi server";
        console.error(err);
      });
    }
  </script>
</body>
</html>
